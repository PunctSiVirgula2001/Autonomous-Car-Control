<?xml version='1.0' encoding='UTF-8' standalone='no'?>
<section xmlns="http://docbook.org/ns/docbook" version="5.0" xmlns:xlink="http://www.w3.org/1999/xlink" xml:id="__motor_and_servo_control_8h_source" xml:lang="en-US">
<title>MotorAndServoControl.h</title>
<indexterm><primary>include/motors/MotorAndServoControl.h</primary></indexterm>
Go to the documentation of this file.<programlisting linenumbering="unnumbered"><anchor xml:id="__motor_and_servo_control_8h_source_1l00001"/>00001 <emphasis role="preprocessor">#ifndef&#32;MOTORANDSERVOCONTROL</emphasis>
<anchor xml:id="__motor_and_servo_control_8h_source_1l00002"/>00002 <emphasis role="preprocessor">#define&#32;MOTORANDSERVOCONTROL</emphasis>
<anchor xml:id="__motor_and_servo_control_8h_source_1l00003"/>00003 
<anchor xml:id="__motor_and_servo_control_8h_source_1l00004"/>00004 <emphasis role="preprocessor">#include&#32;&quot;<link linkend="__dc_motor_8h">drivers/DcMotor.h</link>&quot;</emphasis>
<anchor xml:id="__motor_and_servo_control_8h_source_1l00005"/>00005 <emphasis role="preprocessor">#include&#32;&quot;<link linkend="__servo_motor_8h">drivers/ServoMotor.h</link>&quot;</emphasis>
<anchor xml:id="__motor_and_servo_control_8h_source_1l00006"/>00006 <emphasis role="preprocessor">#include&#32;&quot;<link linkend="_encoder_8h">drivers/encoder.h</link>&quot;</emphasis>
<anchor xml:id="__motor_and_servo_control_8h_source_1l00007"/>00007 
<anchor xml:id="__motor_and_servo_control_8h_source_1l00008"/>00008 <emphasis role="comment">/*Car&#32;control*/</emphasis>
<anchor xml:id="__motor_and_servo_control_8h_source_1l00009"/><link linkend="__motor_and_servo_control_8h_1ae4c4a214147677f463f9ba6a33c4022c">00009</link> <emphasis role="preprocessor">#define&#32;QUEUE_SIZE_CAR_COMMANDS&#32;20</emphasis>
<anchor xml:id="__motor_and_servo_control_8h_source_1l00010"/><link linkend="__motor_and_servo_control_8h_1ad0a5a563f7a841de2fd8aa720c0f70f9">00010</link> <emphasis role="preprocessor">#define&#32;QUEUE_SIZE_DATATYPE_CAR_COMMANDS&#32;(sizeof(char*))</emphasis>
<anchor xml:id="__motor_and_servo_control_8h_source_1l00011"/>00011 
<anchor xml:id="__motor_and_servo_control_8h_source_1l00012"/>00012 <emphasis role="comment">/*COMMANDS&#32;RECEIVED&#32;FROM&#32;APP*/</emphasis>
<anchor xml:id="__motor_and_servo_control_8h_source_1l00013"/><link linkend="__motor_and_servo_control_8h_1a7b15d67975290586b9379fb94d061cf6">00013</link> <emphasis role="keyword">typedef</emphasis>&#32;<emphasis role="keyword">enum</emphasis>&#32;{
<anchor xml:id="__motor_and_servo_control_8h_source_1l00014"/><link linkend="__motor_and_servo_control_8h_1a7b15d67975290586b9379fb94d061cf6a38ff3124e97bad134a6c47fa91f40273">00014</link> &#32;&#32;&#32;&#32;<link linkend="__motor_and_servo_control_8h_1a7b15d67975290586b9379fb94d061cf6a38ff3124e97bad134a6c47fa91f40273">StopReceived</link>&#32;=&#32;0,&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;00</emphasis>
<anchor xml:id="__motor_and_servo_control_8h_source_1l00015"/><link linkend="__motor_and_servo_control_8h_1a7b15d67975290586b9379fb94d061cf6a2f84761275322f61b7e1abea99187620">00015</link> &#32;&#32;&#32;&#32;<link linkend="__motor_and_servo_control_8h_1a7b15d67975290586b9379fb94d061cf6a2f84761275322f61b7e1abea99187620">ForwardReceived</link>&#32;=&#32;1,&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;01</emphasis>
<anchor xml:id="__motor_and_servo_control_8h_source_1l00016"/><link linkend="__motor_and_servo_control_8h_1a7b15d67975290586b9379fb94d061cf6ac47cb1c3582d438ab4dbaf9303c0a5c2">00016</link> &#32;&#32;&#32;&#32;<link linkend="__motor_and_servo_control_8h_1a7b15d67975290586b9379fb94d061cf6ac47cb1c3582d438ab4dbaf9303c0a5c2">BackwardReceived</link>&#32;=&#32;2,&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;02&#32;//03&#32;-&gt;left&#32;light,&#32;04&#32;-&gt;&#32;right&#32;light</emphasis>
<anchor xml:id="__motor_and_servo_control_8h_source_1l00017"/><link linkend="__motor_and_servo_control_8h_1a7b15d67975290586b9379fb94d061cf6a36bfd0a5ed9bd3bf8c1cc31778e6f734">00017</link> &#32;&#32;&#32;&#32;<link linkend="__motor_and_servo_control_8h_1a7b15d67975290586b9379fb94d061cf6a36bfd0a5ed9bd3bf8c1cc31778e6f734">SpeedReceived</link>&#32;=&#32;5,&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;05</emphasis>
<anchor xml:id="__motor_and_servo_control_8h_source_1l00018"/><link linkend="__motor_and_servo_control_8h_1a7b15d67975290586b9379fb94d061cf6a18f72057a72b84c91c71e9a29779b889">00018</link> &#32;&#32;&#32;&#32;<link linkend="__motor_and_servo_control_8h_1a7b15d67975290586b9379fb94d061cf6a18f72057a72b84c91c71e9a29779b889">SteerReceived</link>&#32;=&#32;6,&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;06</emphasis>
<anchor xml:id="__motor_and_servo_control_8h_source_1l00019"/><link linkend="__motor_and_servo_control_8h_1a7b15d67975290586b9379fb94d061cf6af7d72e81b866e7bd38f8ba2240caee98">00019</link> &#32;&#32;&#32;&#32;<link linkend="__motor_and_servo_control_8h_1a7b15d67975290586b9379fb94d061cf6af7d72e81b866e7bd38f8ba2240caee98">AutonomousReceived</link>&#32;=&#32;7,&#32;&#32;&#32;&#32;&#32;<emphasis role="comment">//&#32;07</emphasis>
<anchor xml:id="__motor_and_servo_control_8h_source_1l00020"/>00020 &#32;&#32;&#32;&#32;<link linkend="__motor_and_servo_control_8h_1a7b15d67975290586b9379fb94d061cf6a83b13685e6cda59d2c8e05ead61a7287">PID_Changed</link>&#32;=&#32;8
<anchor xml:id="__motor_and_servo_control_8h_source_1l00021"/><link linkend="__motor_and_servo_control_8h_1a7b15d67975290586b9379fb94d061cf6a83b13685e6cda59d2c8e05ead61a7287">00021</link> }&#32;<link linkend="__motor_and_servo_control_8h_1a7b15d67975290586b9379fb94d061cf6">ReceivedState_app</link>;
<anchor xml:id="__motor_and_servo_control_8h_source_1l00022"/>00022 
<anchor xml:id="__motor_and_servo_control_8h_source_1l00023"/><link linkend="_struct_car_command">00023</link> <emphasis role="keyword">typedef</emphasis>&#32;<emphasis role="keyword">struct&#32;</emphasis>{
<anchor xml:id="__motor_and_servo_control_8h_source_1l00024"/><link linkend="_struct_car_command_1a7cd16e2fee904b8a434a08c7eda5d046">00024</link> &#32;&#32;&#32;&#32;<link linkend="__motor_and_servo_control_8h_1a7b15d67975290586b9379fb94d061cf6">ReceivedState_app</link>&#32;<link linkend="_struct_car_command_1a7cd16e2fee904b8a434a08c7eda5d046">command</link>;
<anchor xml:id="__motor_and_servo_control_8h_source_1l00025"/><link linkend="_struct_car_command_1ab80a641a1922d03fd19935a5efd1f44b">00025</link> &#32;&#32;&#32;&#32;<emphasis role="keywordtype">int</emphasis>&#32;<link linkend="_struct_car_command_1ab80a641a1922d03fd19935a5efd1f44b">command_value</link>;
<anchor xml:id="__motor_and_servo_control_8h_source_1l00026"/><link linkend="_struct_car_command_1a9dfa744f0c79dc3f439d054cc3878eaa">00026</link> &#32;&#32;&#32;&#32;<emphasis role="keywordtype">bool</emphasis>&#32;<link linkend="_struct_car_command_1a9dfa744f0c79dc3f439d054cc3878eaa">has_value</link>;&#32;<emphasis role="comment">//&#32;Indicates&#32;whether&#32;command_value&#32;is&#32;valid</emphasis>
<anchor xml:id="__motor_and_servo_control_8h_source_1l00027"/><link linkend="_struct_car_command_1abf14c0656fbb57a86c322a87af806030">00027</link> &#32;&#32;&#32;&#32;<emphasis role="keywordtype">float</emphasis>&#32;<link linkend="_struct_car_command_1abf14c0656fbb57a86c322a87af806030">KP</link>;
<anchor xml:id="__motor_and_servo_control_8h_source_1l00028"/><link linkend="_struct_car_command_1aa7d5dd64817c03d067d0e922cd35d75c">00028</link> &#32;&#32;&#32;&#32;<emphasis role="keywordtype">float</emphasis>&#32;<link linkend="_struct_car_command_1aa7d5dd64817c03d067d0e922cd35d75c">KI</link>;
<anchor xml:id="__motor_and_servo_control_8h_source_1l00029"/><link linkend="_struct_car_command_1a16424cc4cde718119fedda0db72c792f">00029</link> &#32;&#32;&#32;&#32;<emphasis role="keywordtype">float</emphasis>&#32;<link linkend="_struct_car_command_1a16424cc4cde718119fedda0db72c792f">KD</link>;
<anchor xml:id="__motor_and_servo_control_8h_source_1l00030"/>00030 }&#32;<link linkend="_struct_car_command">CarCommand</link>;
<anchor xml:id="__motor_and_servo_control_8h_source_1l00031"/>00031 
<anchor xml:id="__motor_and_servo_control_8h_source_1l00032"/>00032 <emphasis role="comment">/*Car&#32;control&#32;tasks*/</emphasis>
<anchor xml:id="__motor_and_servo_control_8h_source_1l00033"/>00033 <emphasis role="keywordtype">void</emphasis>&#32;<link linkend="__motor_and_servo_control_8h_1a356958ec8c1d6b214ec4228ce5ae6f56">carControl_Task</link>(<emphasis role="keywordtype">void</emphasis>&#32;*pvParameters);
<anchor xml:id="__motor_and_servo_control_8h_source_1l00034"/>00034 <emphasis role="keywordtype">void</emphasis>&#32;<link linkend="__motor_and_servo_control_8h_1a111cf66cc0671765a5325a79a37773a2">steer_task</link>(<emphasis role="keywordtype">void</emphasis>&#32;*pvParameters);
<anchor xml:id="__motor_and_servo_control_8h_source_1l00035"/>00035 
<anchor xml:id="__motor_and_servo_control_8h_source_1l00036"/>00036 <emphasis role="comment">/*Car&#32;control&#32;functions*/</emphasis>
<anchor xml:id="__motor_and_servo_control_8h_source_1l00037"/>00037 <emphasis role="keywordtype">void</emphasis>&#32;<link linkend="__motor_and_servo_control_8h_1a3b1a84c1a0e08894d761413c5c66c701">carControl_init</link>();
<anchor xml:id="__motor_and_servo_control_8h_source_1l00038"/>00038 <emphasis role="keywordtype">void</emphasis>&#32;<link linkend="__motor_and_servo_control_8h_1a64174a9e686c6f19ea9dc54d1d47085b">carControl_Backward_init</link>(<emphasis role="keywordtype">int</emphasis>&#32;break_value);
<anchor xml:id="__motor_and_servo_control_8h_source_1l00039"/>00039 <link linkend="_struct_car_command">CarCommand</link>&#32;<link linkend="__motor_and_servo_control_8h_1a5bdc71d98132147d476bffaf9a319080">parseCommand</link>(<emphasis role="keyword">const</emphasis>&#32;<emphasis role="keywordtype">char</emphasis>*&#32;commandStr);
<anchor xml:id="__motor_and_servo_control_8h_source_1l00040"/>00040 
<anchor xml:id="__motor_and_servo_control_8h_source_1l00041"/>00041 <emphasis role="preprocessor">#endif</emphasis>
</programlisting></section>
